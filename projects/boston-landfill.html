<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-js-0a4677af0a49c95a9c69.js" as="script"/><link rel="preload" href="/component---src-templates-project-js-6c895f3e9915ada56042.js" as="script"/><link rel="preload" href="/path---projects-boston-landfill-html-c33fc7b5af3aeeca1805.js" as="script"/><link rel="preload" href="/app-9fd5cfe682acdcd0464d.js" as="script"/><link rel="preload" href="/commons-9695a5ce4dab8f6f0433.js" as="script"/><style data-styled-components="dSdPQY gHzNhV bzPxeS kdrDon">
/* sc-component-id: sc-bdVaJa */
.dSdPQY{margin:0 auto;width:70%;padding:30px;padding-top:30px;}
/* sc-component-id: sc-bwzfXH */
.gHzNhV{margin-bottom:20px;}
/* sc-component-id: sc-htpNat */
.bzPxeS{margin:0 auto;display:block;max-width:100%;border:solid 1px #eee;}
/* sc-component-id: sc-bxivhb */
.kdrDon a{color:steelblue;} .kdrDon a:hover{-webkit-text-decoration:underline;text-decoration:underline;} .kdrDon a.anchor{color:inherit;fill:steelblue;-webkit-text-decoration:none;text-decoration:none;border-bottom:none;box-shadow:none;} .kdrDon p{margin:0 auto;margin-top:30px;font-size:17px;line-height:1.7;} .kdrDon ul{list-style:disc;margin-top:20px;font-size:16px;color:#1a1a1a;padding-left:20px;} .kdrDon ul li{margin-top:10px;} .kdrDon h3 + p,.kdrDon h3 + p:first-of-type{margin-top:20px;} .kdrDon h1{line-height:1.2;} .kdrDon h2{border-top:1px solid black;margin-top:44px;padding-top:40px;line-height:1.2;} .kdrDon h2:first-child{border-top:0;margin-top:0;padding-top:0;} .kdrDon h2 [media.lessThan('large')]:{fontSize:20,;} .kdrDon h2,.kdrDon h2 [media.greaterThan('xlarge')]:{fontSize:35,;} .kdrDon,.kdrDon hr + h2{border-top:0;margin-top:0;} .kdrDon h3{padding-top:45px;} .kdrDon h3 [media.lessThan('small')]:{wordBreak:'break-all',;} .kdrDon h3,.kdrDon h3 [media.greaterThan('xlarge')]:{fontSize:25, lineHeight:1.3,;} .kdrDon h2 + h3,.kdrDon h2 + h3:first-of-type{padding-top:30px;} .kdrDon h4{font-size:20px;color:black;line-height:1.3;margin-top:50px;font-weight:400,;} .kdrDon h4 + p{margin-top:20px;}</style><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><title data-react-helmet="true">Projects</title><meta data-react-helmet="true" property="og:title" content="Projects"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:url" content="dave"/><meta data-react-helmet="true" property="og:image" content="/logo-og.png"/><meta data-react-helmet="true" property="og:description" content="dave"/><meta data-react-helmet="true" property="fb:app_id" content="623268441017527"/><style id="gatsby-inlined-css">code[class*=language-],pre[class*=language-]{color:#34525d;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#e7faff}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#e7faff}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;margin-left:-18px;border-left:2px solid #b7d6ec}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fff}:not(pre)>code[class*=language-]{padding:.1em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}html{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:400;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body{overflow-x:hidden;position:relative}*{margin:0;padding:0}*,:after,:before{box-sizing:inherit}a{color:inherit;text-decoration:none}ol,ul{list-style:none}img{display:inline-block;vertical-align:top}code,pre{font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}</style></head><body><div id="___gatsby"><div class="sc-bdVaJa dSdPQY" data-reactroot="" data-reactid="1" data-react-checksum="-1972186279"><a href="/" data-reactid="2"><h1 class="sc-bwzfXH gHzNhV" data-reactid="3">Dave Reed</h1></a><div data-reactid="4"><!-- react-empty: 5 --><h1 data-reactid="6">Boston Landfill</h1><a href="https://github.com/dvreed77/boston_landfill" target="_blank" data-reactid="7">Repository</a><a href="https://dvreed77.github.io/boston_landfill/" target="_blank" data-reactid="8">Project</a><div data-reactid="9"><!-- react-text: 10 -->2017-10-06<!-- /react-text --><!-- react-text: 11 --> to <!-- /react-text --><!-- react-text: 12 -->2017-10-23<!-- /react-text --></div><a href="https://dvreed77.github.io/boston_landfill/" target="_blank" data-reactid="13"><img class="sc-htpNat bzPxeS" src="/static/boston-landfill-60905d0ced07df3d6eecfa2ea1ea9220.png" alt="" data-reactid="14"/></a><div class="sc-bxivhb kdrDon" data-reactid="15"><p>This is a project I became interested in a long time ago.  I have been in Boston for over 12 years, and knew that Boston was built over time from a sequence of landfill projects.  I was interested in creating an app that allowed the user to scrub through time and see what parts of Boston were changed and when.  </p>
<p>After a little bit of digging, I found the best dataset <a href="http://www.bc.edu/bc_org/avp/cas/fnart/fa267/sequence.html">here</a>, a crappy GIF.  I probably could have emailed the professor for something of higher quality, but since I am always up for a challenge, I wanted to use this to practice a variety of skills:</p>
<ul>
<li>Understand GIFs in Python</li>
<li>Some basic image processing: dilation/erosion, thresholding, smoothing, etc.</li>
<li>Extract contours/shapes from an image</li>
<li>Shape manipulations: merging, intersection</li>
<li>SVG creation</li>
<li>GeoJSON creation</li>
<li>Interactive React App with GeoJSON objects</li>
<li>React App for timelines, and other Interactive elements</li>
</ul>
<h2 id="data"><a href="#data" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Data</h2>
<p>Original data was sourced here, a GIF image: <a href="http://www.bc.edu/bc_org/avp/cas/fnart/fa267/sequence.html">http://www.bc.edu/bc_org/avp/cas/fnart/fa267/sequence.html</a></p>
<h2 id="key-lessons-learned"><a href="#key-lessons-learned" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Key Lessons Learned</h2>
<h3 id="read-gif-in-python"><a href="#read-gif-in-python" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Read GIF in Python</h3>
<p>A colored GIF is just a <code class="language-text">F x M x N x C</code> tensor, where <code class="language-text">F</code> is the number of frames, <code class="language-text">M</code> and <code class="language-text">N</code> are the height and width, and <code class="language-text">C=3</code> are the 3 RGB channels.</p>
<p>Easy to read image (and make Greyscale):</p>
<div class="gatsby-highlight">
      <pre class="language-python"><code class="language-python"><span class="token keyword">from</span> skimage<span class="token punctuation">.</span>io <span class="token keyword">import</span> imread
<span class="token keyword">from</span> skimage<span class="token punctuation">.</span>color <span class="token keyword">import</span> rgb2gray

image <span class="token operator">=</span> rgb2gray<span class="token punctuation">(</span>imread<span class="token punctuation">(</span><span class="token string">'img.gif'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
      </div>
<h3 id="basic-image-processing"><a href="#basic-image-processing" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Basic Image Processing</h3>
<h4 id="resizing"><a href="#resizing" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resizing</h4>
<div class="gatsby-highlight">
      <pre class="language-python"><code class="language-python"><span class="token keyword">from</span> skimage<span class="token punctuation">.</span>transform <span class="token keyword">import</span> resize <span class="token keyword">as</span> resize_image

image <span class="token operator">=</span> resize_image<span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
      </div>
<h4 id="slight-blur"><a href="#slight-blur" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Slight blur</h4>
<div class="gatsby-highlight">
      <pre class="language-python"><code class="language-python"><span class="token keyword">from</span> skimage<span class="token punctuation">.</span>filters <span class="token keyword">import</span> gaussian

image <span class="token operator">=</span> gaussian<span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span></code></pre>
      </div>
<h4 id="thresholding"><a href="#thresholding" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Thresholding</h4>
<p>I used <code class="language-text">threshold_minimum</code> which is described as: The histogram of the input image is computed and smoothed until there are only two maxima. Then the minimum in between is the threshold value.</p>
<p>It is described in more detail <a href="http://scikit-image.org/docs/dev/auto_examples/xx_applications/plot_thresholding.html#bimodal-histogram">here</a></p>
<div class="gatsby-highlight">
      <pre class="language-python"><code class="language-python">threshold <span class="token operator">=</span> threshold_minimum<span class="token punctuation">(</span>rimage<span class="token punctuation">)</span>

binary <span class="token operator">=</span> <span class="token punctuation">(</span>image <span class="token operator">></span> threshold<span class="token punctuation">)</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>
  <span class="token comment"># binary = binary_dilation(binary)</span>

  <span class="token keyword">return</span> binary</code></pre>
      </div>
<h4 id="erosiondilation"><a href="#erosiondilation" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Erosion/Dilation</h4>
<div class="gatsby-highlight">
      <pre class="language-python"><code class="language-python"><span class="token keyword">from</span> skimage<span class="token punctuation">.</span>morphology <span class="token keyword">import</span> binary_dilation<span class="token punctuation">,</span> binary_erosion

image <span class="token operator">=</span> binary_dilation<span class="token punctuation">(</span>image<span class="token punctuation">)</span></code></pre>
      </div>
<h3 id="get-contours-from-image"><a href="#get-contours-from-image" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Get contours from image</h3>
<p>This creates contours where image = 0. Since we created a binary image with thresholding, this is easy.</p>
<div class="gatsby-highlight">
      <pre class="language-python"><code class="language-python"><span class="token keyword">from</span> skimage <span class="token keyword">import</span> measure

contours <span class="token operator">=</span> measure<span class="token punctuation">.</span>find_contours<span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></code></pre>
      </div>
<h3 id="contour-to-shapes"><a href="#contour-to-shapes" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contour to Shapes</h3>
<div class="gatsby-highlight">
      <pre class="language-python"><code class="language-python"><span class="token keyword">from</span> shapely<span class="token punctuation">.</span>geometry <span class="token keyword">import</span> Polygon

polygon <span class="token operator">=</span> Polygon<span class="token punctuation">(</span>c<span class="token punctuation">)</span></code></pre>
      </div>
<h3 id="simplify-shapes"><a href="#simplify-shapes" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Simplify shapes</h3>
<div class="gatsby-highlight">
      <pre class="language-python"><code class="language-python">p <span class="token operator">=</span> polygon<span class="token punctuation">.</span>simplify<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> preserve_topology<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></code></pre>
      </div>
<h3 id="convert-contours-to-svg"><a href="#convert-contours-to-svg" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Convert contours to SVG</h3>
<p>In order to convert Shapely shapes to SVG, I manually built my own SVG path elements, similar to this:</p>
<div class="gatsby-highlight">
      <pre class="language-python"><code class="language-python">path <span class="token operator">=</span> svgwrite<span class="token punctuation">.</span>path<span class="token punctuation">.</span>Path<span class="token punctuation">(</span><span class="token punctuation">)</span>
ext_points <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>shape<span class="token punctuation">.</span>exterior<span class="token punctuation">.</span>coords<span class="token punctuation">)</span>

P <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'M'</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>ext_points<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>ext_points<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'L'</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> ext_points<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'Z'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span>path<span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token operator">*</span>x<span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> P<span class="token punctuation">]</span>

<span class="token keyword">for</span> interior <span class="token keyword">in</span> shape<span class="token punctuation">.</span>interiors<span class="token punctuation">:</span>
    int_points <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>interior<span class="token punctuation">.</span>coords<span class="token punctuation">)</span>

    P <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'M'</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>int_points<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>int_points<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'L'</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> int_points<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'Z'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span>path<span class="token punctuation">.</span>push<span class="token punctuation">(</span><span class="token operator">*</span>x<span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> P<span class="token punctuation">]</span></code></pre>
      </div>
<h3 id="convert-svg-to-polygons"><a href="#convert-svg-to-polygons" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Convert SVG to Polygons</h3>
<p>In order to convert Shapely shapes to SVG, I manually built my own SVG path elements, similar to this:</p>
<div class="gatsby-highlight">
      <pre class="language-python"><code class="language-python"><span class="token keyword">from</span> shapely<span class="token punctuation">.</span>geometry <span class="token keyword">import</span> Polygon<span class="token punctuation">,</span> MultiPolygon
<span class="token keyword">from</span> xml<span class="token punctuation">.</span>dom <span class="token keyword">import</span> minidom<span class="token punctuation">,</span> Node
<span class="token keyword">from</span> svg<span class="token punctuation">.</span>path <span class="token keyword">import</span> parse_path <span class="token keyword">as</span> parse_svg_path

svg_doc <span class="token operator">=</span> minidom<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">"data/svg_out.svg"</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">parse_path</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    points <span class="token operator">=</span> <span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>start<span class="token punctuation">.</span>real<span class="token punctuation">,</span> x<span class="token punctuation">.</span>start<span class="token punctuation">.</span>imag<span class="token punctuation">)</span><span class="token punctuation">,</span> parse_svg_path<span class="token punctuation">(</span>path<span class="token punctuation">.</span>getAttribute<span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> points

points <span class="token operator">=</span> parse_path<span class="token punctuation">(</span>svg_doc<span class="token punctuation">.</span>getElementsByTagName<span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Polygon<span class="token punctuation">(</span>points<span class="token punctuation">)</span></code></pre>
      </div>
<h3 id="convert-polygons-to-geojson"><a href="#convert-polygons-to-geojson" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Convert Polygons to GeoJSON</h3>
<div class="gatsby-highlight">
      <pre class="language-python"><code class="language-python"><span class="token keyword">from</span> shapely<span class="token punctuation">.</span>geometry <span class="token keyword">import</span> mapping
<span class="token keyword">import</span> json

out <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"FeatureCollection"</span><span class="token punctuation">,</span>
    <span class="token string">"features"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"Feature"</span><span class="token punctuation">,</span>
            <span class="token string">"properties"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">"layer"</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">"region"</span><span class="token punctuation">:</span> <span class="token string">"logan_airport"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">"geometry"</span><span class="token punctuation">:</span> mapping<span class="token punctuation">(</span>shape<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>        
<span class="token punctuation">}</span>

json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>out<span class="token punctuation">,</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test.geojson'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
      </div></div></div></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-9fd5cfe682acdcd0464d.js","110308036455227":"component---src-templates-project-js-6c895f3e9915ada56042.js","190382013331306":"component---src-templates-painting-js-df4d50d01be5d2744582.js","36733297554888":"component---src-templates-blog-js-5ae5075ac417193065ea.js","263791100135453":"component---src-pages-about-js-85b708799c4a2b7167e7.js","35783957827783":"component---src-pages-index-js-71d5894ccd94a71e185b.js","166561596126116":"component---src-pages-paintings-js-55d915e22453a74613b0.js","60335399758886":"path----743d2994140f04d965f2.js","171392874688111":"path---projects-boston-landfill-html-c33fc7b5af3aeeca1805.js","60994111247096":"path---paintings-fall-leaves-html-a5b3965a27643c189420.js","108152337150804":"path---paintings-boston-skyline-html-3e7fc64e636f096a10cc.js","252841584924816":"path---blog-2013-06-02-jsfiddle-integration-html-37c402641028c22710d5.js","171467037383261":"path---paintings-flower-close-html-1ab8da8588af43c38aa2.js","163534672129231":"path---paintings-man-donkey-html-a324ad549e889a9a2c5c.js","121472124918367":"path---paintings-flowers-1-html-9d7d162d279929ef0c46.js","43632183677211":"path---paintings-ireland-html-c3226fcb793239e7e1d5.js","239500807893067":"path---paintings-parisian-men-html-89c5c797738e348ff922.js","153187831515773":"path---paintings-santorini-html-add05dd01d4427a05701.js","273950069227526":"path---about-d1e6282edf0ab11f5895.js","142629428675168":"path---index-cb0df0ff2fdf61f1441b.js","259320087796403":"path---paintings-af56e87712ca0a9daf25.js","114276838955818":"component---src-layouts-index-js-0a4677af0a49c95a9c69.js"}/*]]>*/</script><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/commons-9695a5ce4dab8f6f0433.js","/app-9fd5cfe682acdcd0464d.js","/path---projects-boston-landfill-html-c33fc7b5af3aeeca1805.js","/component---src-templates-project-js-6c895f3e9915ada56042.js","/component---src-layouts-index-js-0a4677af0a49c95a9c69.js"])/*]]>*/</script></body></html>