{"data":{"markdownRemark":{"html":"<table>\n<thead>\n<tr>\n<th align=\"center\"><strong>City</strong></th>\n<th align=\"center\"><strong>State</strong></th>\n<th align=\"center\"><strong>Count</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">Portland</td>\n<td align=\"center\">Oregon</td>\n<td align=\"center\">80</td>\n</tr>\n<tr>\n<td align=\"center\">Denver</td>\n<td align=\"center\">Colorado</td>\n<td align=\"center\">77</td>\n</tr>\n<tr>\n<td align=\"center\">San Diego</td>\n<td align=\"center\">California</td>\n<td align=\"center\">74</td>\n</tr>\n<tr>\n<td align=\"center\">Chicago</td>\n<td align=\"center\">Illinois</td>\n<td align=\"center\">69</td>\n</tr>\n<tr>\n<td align=\"center\">Seattle</td>\n<td align=\"center\">Washington</td>\n<td align=\"center\">67</td>\n</tr>\n<tr>\n<td align=\"center\">Austin</td>\n<td align=\"center\">Texas</td>\n<td align=\"center\">43</td>\n</tr>\n<tr>\n<td align=\"center\">Albuquerque</td>\n<td align=\"center\">New Mexico</td>\n<td align=\"center\">40</td>\n</tr>\n<tr>\n<td align=\"center\">San Francisco</td>\n<td align=\"center\">California</td>\n<td align=\"center\">37</td>\n</tr>\n<tr>\n<td align=\"center\">Minneapolis</td>\n<td align=\"center\">Minnesota</td>\n<td align=\"center\">36</td>\n</tr>\n<tr>\n<td align=\"center\">Indianapolis</td>\n<td align=\"center\">Indiana</td>\n<td align=\"center\">35</td>\n</tr>\n<tr>\n<td align=\"center\">Asheville</td>\n<td align=\"center\">North Carolina</td>\n<td align=\"center\">30</td>\n</tr>\n<tr>\n<td align=\"center\">Los Angeles</td>\n<td align=\"center\">California</td>\n<td align=\"center\">29</td>\n</tr>\n<tr>\n<td align=\"center\">Milwaukee</td>\n<td align=\"center\">Wisconsin</td>\n<td align=\"center\">28</td>\n</tr>\n<tr>\n<td align=\"center\">Brooklyn</td>\n<td align=\"center\">New York</td>\n<td align=\"center\">26</td>\n</tr>\n<tr>\n<td align=\"center\">Saint Louis</td>\n<td align=\"center\">Missouri</td>\n<td align=\"center\">26</td>\n</tr>\n<tr>\n<td align=\"center\">Cincinnati</td>\n<td align=\"center\">Ohio</td>\n<td align=\"center\">26</td>\n</tr>\n<tr>\n<td align=\"center\">Nashville</td>\n<td align=\"center\">Tennessee</td>\n<td align=\"center\">25</td>\n</tr>\n<tr>\n<td align=\"center\">Columbus</td>\n<td align=\"center\">Ohio</td>\n<td align=\"center\">25</td>\n</tr>\n<tr>\n<td align=\"center\">Colorado Springs</td>\n<td align=\"center\">Colorado</td>\n<td align=\"center\">25</td>\n</tr>\n</tbody>\n</table>\n<p>I wanted to know about stuff</p>\n<p>First, I need to get all the data</p>\n<div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">for</span> p <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1510</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    params <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'start'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token operator\">*</span>p<span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'c_id'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'US'</span>\n    <span class=\"token punctuation\">}</span>\n    page <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'https://www.beeradvocate.com/place/list'</span><span class=\"token punctuation\">,</span> params<span class=\"token operator\">=</span>params<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>f<span class=\"token string\">'./beer_advocate/page_{p}.html'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'w'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> fid<span class=\"token punctuation\">:</span>\n        fid<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<p>Then, some xpath magic</p>\n<div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\"language-python\"><code class=\"language-python\">get_name <span class=\"token operator\">=</span> <span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">'./td[1]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>text_content<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>get_name<span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nget_address <span class=\"token operator\">=</span> <span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">\"./td[1]/text()\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>get_address<span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nget_zip <span class=\"token operator\">=</span> <span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">\"./td[1]/text()\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">', '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tryf<span class=\"token punctuation\">(</span>get_zip<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nget_city <span class=\"token operator\">=</span> <span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">\"./td[1]/a[1]/text()\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tryf<span class=\"token punctuation\">(</span>get_city<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nget_state <span class=\"token operator\">=</span> <span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">\"./td[1]/a[2]/text()\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tryf<span class=\"token punctuation\">(</span>get_state<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nget_country <span class=\"token operator\">=</span> <span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> <span class=\"token string\">\" \"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">\"./td[1]/a[3]/text()\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tryf<span class=\"token punctuation\">(</span>get_country<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nget_score <span class=\"token operator\">=</span> <span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">'./td[2]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>text_content<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tryf<span class=\"token punctuation\">(</span>get_score<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nget_ratings <span class=\"token operator\">=</span> <span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">'./td[3]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>text_content<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tryf<span class=\"token punctuation\">(</span>get_ratings<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nget_beer_avg <span class=\"token operator\">=</span> <span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">'./td[4]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>text_content<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tryf<span class=\"token punctuation\">(</span>get_beer_avg<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nget_num_beers <span class=\"token operator\">=</span> <span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">'./td[5]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>text_content<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tryf<span class=\"token punctuation\">(</span>get_num_beers<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\"language-python\"><code class=\"language-python\">out <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">for</span> page_num <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1510</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    page <span class=\"token operator\">=</span> get_page<span class=\"token punctuation\">(</span>page_num<span class=\"token punctuation\">)</span>\n    places <span class=\"token operator\">=</span> get_places<span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> p <span class=\"token keyword\">in</span> places<span class=\"token punctuation\">:</span>\n        out<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            <span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span> get_name<span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'address'</span><span class=\"token punctuation\">:</span> tryf<span class=\"token punctuation\">(</span>get_address<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'city'</span><span class=\"token punctuation\">:</span> tryf<span class=\"token punctuation\">(</span>get_city<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'state'</span><span class=\"token punctuation\">:</span> tryf<span class=\"token punctuation\">(</span>get_state<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'country'</span><span class=\"token punctuation\">:</span> tryf<span class=\"token punctuation\">(</span>get_country<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'zip'</span><span class=\"token punctuation\">:</span> tryf<span class=\"token punctuation\">(</span>get_zip<span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'score'</span><span class=\"token punctuation\">:</span> get_score<span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'ratings'</span><span class=\"token punctuation\">:</span> get_ratings<span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'beer_avg'</span><span class=\"token punctuation\">:</span> get_beer_avg<span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'num_beers'</span><span class=\"token punctuation\">:</span> get_num_beers<span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\ndf <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>out<span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">.</span>num_beers <span class=\"token operator\">!=</span> <span class=\"token string\">'-'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'city'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'state'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span>ascending<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>","excerpt":"City State Count Portland Oregon 80 Denver Colorado 77 San Diego California 74 Chicago Illinois 69 Seattle Washington 67 Austin Texas 43 Albuquerque New Mexico 40 San Francisco California 37 Minneapolis Minnesota 36 Indianapolis Indiana 35 Asheville North Carolina 30 Los Angeles California 29 Milwaukee Wisconsin 28 Brooklyn New York 26 Saint Louis Missouri 26 Cincinnati Ohio 26 Nashville Tennessee 25 Columbus Ohio 25 Colorado Springs Colorado 25 I wanted to know about stuff First, I need to get…","frontmatter":{"title":"Breweries by State"},"fields":{"date":"August 10, 2018","path":"blog/2018-08-10-breweries-by-state.md","slug":"/blog/2018/08/10/breweries-by-state.html"}},"allMarkdownRemark":null},"pageContext":{"jsonName":"blog-2018-08-10-breweries-by-state-html-ba0","internalComponentName":"ComponentBlog20180810BreweriesByStateHtml","path":"/blog/2018/08/10/breweries-by-state.html","component":"/Users/dreed/personal_code/dvreed.com/src/templates/blog.js","componentChunkName":"component---src-templates-blog-js","context":{"slug":"/blog/2018/08/10/breweries-by-state.html"},"updatedAt":1534211209351,"pluginCreator___NODE":"Plugin default-site-plugin","pluginCreatorId":"Plugin default-site-plugin","componentPath":"/Users/dreed/personal_code/dvreed.com/src/templates/blog.js","slug":"/blog/2018/08/10/breweries-by-state.html"}}